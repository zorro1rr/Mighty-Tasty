(this["webpackJsonpmighty-tasty"]=this["webpackJsonpmighty-tasty"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/favicon.83942fdc.ico"},function(e,t,a){},function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/searchy.e36b4ad9.gif"},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),c=a.n(s),i=(a(15),a(2)),o=a(3),l=a(1),u=a(4),h=a(5),m=(a(16),a(6)),d=a.n(m),p=a(7),y=(a(18),{"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count"}),v=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleKeyPress=function(e){"Enter"===e.key&&a.handleSearch(e)},a.state={term:"",location:"",sortBy:"best_match",userLocation:""},a.handleTermChange=a.handleTermChange.bind(Object(l.a)(a)),a.handleLocationChange=a.handleLocationChange.bind(Object(l.a)(a)),a.getLocation=a.getLocation.bind(Object(l.a)(a)),a.handleSearch=a.handleSearch.bind(Object(l.a)(a)),a}return Object(o.a)(n,[{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"handleLocationChange",value:function(e){this.setState({location:e.target.value})}},{key:"handleSearch",value:function(e){this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy),e.preventDefault(),document.querySelector("html").style="height: 300px;";var t=document.querySelector("#businessDiv"),a=document.querySelector(".BusinessList");t.style="display:none",a.style="display:inherit"}},{key:"getSortByClass",value:function(e){return e===this.state.sortBy?"active":""}},{key:"handleSortByChange",value:function(e){this.setState({sortBy:e})}},{key:"renderSortByOptions",value:function(){var e=this;return Object.keys(y).map((function(t,a){var n=y[t];return r.a.createElement("div",{key:a,onClick:e.handleSearch},r.a.createElement("p",{key:n,onClick:e.handleSortByChange.bind(e,n),className:e.getSortByClass(n)},t))}))}},{key:"getLocation",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://ipapi.co/json");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setState({userLocation:"Search Location: "+a.city}),this.setState({location:a.city});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getLocation()}},{key:"render",value:function(){return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("nav",{id:"nav"},r.a.createElement("div",{id:"logo"},r.a.createElement("img",{src:a(19),alt:"logo"}),r.a.createElement("h2",null,"Mighty-Tasty!")),r.a.createElement("div",{className:"SearchBar-sort-options"},this.renderSortByOptions())),r.a.createElement("div",{className:"SearchBar-fields",onKeyPress:this.handleKeyPress},r.a.createElement("input",{placeholder:"\ud83d\udd0e Search Businesses",term:"Search Businesses",onChange:this.handleTermChange}),r.a.createElement("input",{placeholder:this.state.userLocation,onChange:this.handleLocationChange})),r.a.createElement("button",{className:"SearchBar-submit",onClick:this.handleSearch,onKeyPress:this.handleKeyPress},"Let's Go"))}}]),n}(r.a.Component),b=(a(20),a(21),function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.business;return r.a.createElement("div",{className:"Business"},r.a.createElement("div",{className:"image-container"},r.a.createElement("a",{href:e.imageSrc,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:e.imageSrc,alt:"business img"}))),r.a.createElement("h2",null,e.name),r.a.createElement("hr",null),r.a.createElement("div",{className:"Business-information"},r.a.createElement("div",{className:"Business-address"},r.a.createElement("p",null,r.a.createElement("a",{className:"addy",target:"_blank",rel:"noopener noreferrer",href:"https://www.google.com/maps/place/"+e.address+","+e.city+",+"+e.state+"+"+e.zipCode+"/"},e.address," ",r.a.createElement("br",null),e.city+", "," ",r.a.createElement("br",null)," ",e.state+" "+e.zipCode))),r.a.createElement("div",{className:"Business-reviews"},r.a.createElement("h3",null,e.category),r.a.createElement("p",null,"Phone:",e.phone),r.a.createElement("a",{href:e.yelp,target:"_blank",rel:"noopener noreferrer",className:"rating"},e.rating," stars / ",e.reviewCount," reviews"))))}}]),a}(r.a.Component)),f=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"BusinessList"},this.props.businesses.map((function(e){return r.a.createElement(b,{business:e,key:e.id})})))}}]),a}(r.a.Component),g={searchYelp:function(e,t,a){return Object(p.a)(d.a.mark((function n(){var r,s;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(a),{headers:{Authorization:"Bearer ".concat("pSupkM4EbuChkBT6bCX812gsIACmnTbMQBUuwvs-FNdQSuaFkcVpxbX9YLA3pHIdZqS5S6drqYtJd5TUTT5hw6_HUA1NWDCQqFkoQeeQ7rMhzkIMB7f4To1ZXFB1XnYx")}});case 2:return r=n.sent,n.next=5,r.json();case 5:if(!(s=n.sent).businesses){n.next=8;break}return n.abrupt("return",s.businesses.map((function(e){return{id:e.id,imageSrc:e.image_url,name:e.name,address:e.location.address1,city:e.location.city,state:e.location.state,zipCode:e.location.zip_code,category:e.categories[0].title,rating:e.rating,reviewCount:e.review_count,phone:e.phone,yelp:e.url}})));case 8:case"end":return n.stop()}}),n)})))()}},E=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={businesses:[]},a.searchYelp=a.searchYelp.bind(Object(l.a)(a)),a}return Object(o.a)(n,[{key:"searchYelp",value:function(e,t,a){var n=this;g.searchYelp(e,t,a).then((function(e){n.setState({businesses:e})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"background"},r.a.createElement(v,{searchYelp:this.searchYelp})),r.a.createElement("div",{id:"businessDiv"},r.a.createElement("img",{src:a(22),alt:"search gif"})),r.a.createElement(f,{businesses:this.state.businesses}))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.8ff289dd.chunk.js.map